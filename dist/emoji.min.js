!function(){function e(){}function t(e,t){i(e),h.hasEvent("click_emoji")||h.addListener("click_emoji",t)}function i(e){_="string"==typeof e?document.getElementById(e):e,E.addHandler(_,"click",y.creatDOMHandler)}function o(e,t,i,o){var n=document.getElementById("emoji");if(!n){var r=document.getElementsByTagName("body")[0];n=document.createElement("div"),n.setAttribute("id","emoji"),n.innerHTML="<div id='emoji-container'><div id='emoji-triangle'></div><div id='emoji-content'><ul class='emoji-ul emoji-clearfix'>"+m(o)+"</ul></div></div>",r.appendChild(n),E.addHandler(document,"click",y.documentClick);var c=document.getElementsByClassName("emoji-ul")[0];E.addHandler(c,"click",y.emojiClick)}n.style.left=e+"px",n.style.top=t+"px";var a=document.getElementById("emoji-triangle");"left"==i?g.replaceClass(a,"triangle-left","triangle-right"):g.replaceClass(a,"triangle-right","triangle-left")}function n(e){var t=e.offsetTop;return null!=e.offsetParent&&(t+=n(e.offsetParent)),t}function r(e){var t=e.offsetLeft;return null!=e.offsetParent&&(t+=r(e.offsetParent)),t}function c(e,t){var i=a(e);if(0!=i.length)for(var o=i.length,n=0;o>n;n++)return i[n]==t?!0:arguments.callee(i[n],t)}function a(e){for(var t=e.childNodes,i=[],o=0;o<t.length;o++)1==t[o].nodeType&&i.push(t[o]);return i}function s(){var e=document.getElementById("emoji");if(e){E.removeHandler(document,"click",y.documentClick);var t=document.getElementsByTagName("body")[0];t.removeChild(e)}}function m(e){for(var t="",i=0;i<e.length;i++)t+="<li class='"+e[i]+"'></li>";return t}function l(e,t,i){var o=e.substr(0,t.length);return i?o.toLowerCase()===t.toLowerCase():o===t}function u(e,t){for(var i=e.length,o=0;i>o;o++)t(e[o],o,e)}function d(e){var t=document.getElementsByTagName("script"),i=new RegExp(".*?"+e+".js$"),o=new RegExp(".*?"+e+".min.js$");u(t,function(t){var n=t.getAttribute("src");if(i.test(n)){var r=n.substr(0,n.indexOf(e+".js"));return void f(r+e+".css")}return o.test(n)?(r=n.substr(0,n.indexOf(e+".min.js")),void f(r+e+".min.css")):void 0})}function f(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e);var i=document.getElementsByTagName("head")[0];i.appendChild(t)}var v=this,j={};j.createEmoji=t;var _;d("emoji");var g=new function(){var e=this;e.getClass=function(e){return e.className.replace(/\s+/," ").split(" ")},e.hasClass=function(e,t){return-1<(" "+e.className+" ").indexOf(" "+t+" ")},e.addClass=function(t,i){return e.hasClass(t,i)||(t.className+=" "+i),e},e.removeClass=function(t,i){if(e.hasClass(t,i)){var o=new RegExp("(\\s|^)"+i+"(\\s|$)");t.className=t.className.replace(o," ")}return e},e.clearClass=function(t,i){return t.className="",e},e.replaceClass=function(t,i,o){return e.hasClass(t,o)?e.removeClass(t,o).addClass(t,i):e.addClass(t,i),e}},h=new e,p=e.prototype;p._getEvents=function(){return this._events||(this._events={})},p.addListener=function(e,t){var i=this._getEvents();for(var o in i)if(i.hasOwnProperty(o)&&o==e)return void i[o].listeners.push(t);i[e]={eventname:e,listeners:[t]}},p.removeListener=function(e){var t=this._getEvents();for(var i in t)t.hasOwnProperty(i)&&i==e&&delete t[i]},p.emit=function(e){var t=this._getEvents();for(var i in t)if(t.hasOwnProperty(i)&&i==e)for(var o=t[i].listeners.length,n=0;o>n;n++){var r=t[i].listeners[n];if("function"==typeof r){var c=Array.prototype.slice.call(arguments,1);r.apply(this,c||[])}}},p.hasEvent=function(e){var t=this._getEvents();for(var i in t)if(t.hasOwnProperty(i)&&i==e)return!0;return!1};var E={addHandler:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},removeHandler:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=null},getEvent:function(e){return e?e:window.event},getTarget:function(e){return e.target||e.srcElement},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},y={creatDOMHandler:function(e){var t=["ico_emoji0032","ico_emoji0001","ico_emoji0007","ico_emoji0004","ico_emoji0008","ico_emoji0002","ico_emoji0011","ico_emoji0009","ico_emoji0013","ico_emoji0012","ico_emoji0014","ico_emoji0006","ico_emoji0015","ico_emoji0017","ico_emoji0018","ico_emoji0005","ico_emoji0016","ico_emoji0010","ico_emoji0020","ico_emoji0019","ico_emoji0021","ico_emoji0022","ico_emoji0023","ico_emoji0025","ico_emoji0028","ico_emoji0026","ico_emoji0030","ico_emoji0029","ico_emoji0031","ico_emoji0034","ico_emoji0003","ico_emoji0033","ico_emoji0035","ico_emoji0037","ico_emoji0036","ico_emoji0038","ico_emoji0039","ico_emoji0040","ico_emoji0041","ico_emoji0042","ico_emoji0043","ico_emoji0044","ico_emoji0045","ico_emoji0046","ico_emoji0048","ico_emoji0050","ico_emoji0049","ico_emoji0051","ico_emoji0027","ico_emoji0052","ico_emoji0024","ico_emoji0057","ico_emoji0054","ico_emoji0053","ico_emoji0059","ico_emoji0056","ico_emoji0058","ico_emoji0061","ico_emoji0060","ico_emoji0055"];if(r(_)>300){var i={x:r(_)-300+10+Math.sqrt(200)/2+_.clientWidth/2,y:n(_)+_.clientHeight+10};o(i.x,i.y,"left",t)}else i={x:r(_)-10-Math.sqrt(200)/2+_.clientWidth/2,y:n(_)+_.clientHeight+10},o(i.x,i.y,"right",t)},documentClick:function(e){var t=document.getElementById("emoji"),i=E.getEvent(e),o=E.getTarget(i);if(t&&!c(_,o)){var a=i.clientX,m=i.clientY,l=r(t),u=n(t);a>l&&l+300>a&m>u&&m<u+t.clientHeight||s()}},emojiClick:function(e){event=E.getEvent(e);var t=E.getTarget(event);E.stopPropagation(event),l(t.className,"ico_emoji",!0)&&h.emit("click_emoji",t.className)}};"function"==typeof define&&define.amd?define(function(){return j}):"object"==typeof module&&module.exports?module.exports=j:v.emoji=j}(this);